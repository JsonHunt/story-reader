// Generated by CoffeeScript 1.9.0
(function() {
  var ManageController;

  module.exports = ManageController = function($scope, $cordovaMedia) {
    $scope["delete"] = function(r, i) {
      var str;
      if ($scope.playing) {
        $scope.media.stop();
      }
      $scope.recordings.splice(i, 1);
      str = JSON.stringify($scope.recordings);
      return window.localStorage.setItem('recordings', str);
    };
    $scope.play = function(rec, i) {
      if ($scope.playing) {
        $scope.media.stop();
      }
      console.log(rec);
      $scope.media = new Media(rec.url, function(success) {
        console.log("Success");
        return $scope.$apply(function() {
          return $scope.playing = void 0;
        });
      }, function(error) {
        console.log(JSON.stringify(error));
        return $scope.$apply(function() {
          return $scope.playing = void 0;
        });
      }, function(status) {
        return console.log(JSON.stringify(status));
      });
      $scope.media.play();
      return $scope.playing = rec;
    };
    $scope.stop = function() {
      if ($scope.playing) {
        $scope.media.stop();
        return $scope.media.release();
      }
    };
    return $scope.back = function() {
      if ($scope.media && $scope.playing) {
        $scope.media.stop();
        $scope.media.release();
      }
      return window.history.back();
    };
  };

  ManageController.$inject = ['$scope', '$cordovaMedia'];

}).call(this);
