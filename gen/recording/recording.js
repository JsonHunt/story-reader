// Generated by CoffeeScript 1.9.0
(function() {
  var RecordingController;

  module.exports = RecordingController = function($scope, $location, $timeout) {
    $scope.play = function(word) {
      var filename;
      filename = $scope.folderPath + ("/" + word + ".mp3");
      console.log("Playing: " + filename);
      $scope.media = new Media(filename, function(success) {
        return $scope.$apply(function() {
          return $scope.playing = void 0;
        });
      }, function(error) {
        console.log(JSON.stringify(error));
        return $scope.$apply(function() {
          return $scope.playing = void 0;
        });
      }, function(status) {
        return console.log(JSON.stringify(status));
      });
      return $scope.media.play();
    };
    $scope.record = function(word) {
      var filename;
      filename = $scope.folderPath + ("/" + word + ".mp3");
      $scope.stop();
      console.log("Recording: " + filename);
      $scope.recording = word;
      $scope.media = new Media(filename, function(success) {
        return $scope.$apply(function() {
          return $scope.recording = void 0;
        });
      }, function(error) {
        console.log(JSON.stringify(error));
        return $scope.$apply(function() {
          return $scope.recording = void 0;
        });
      }, function(status) {
        return console.log(JSON.stringify(status));
      });
      return $scope.media.startRecord();
    };
    $scope["continue"] = function() {
      $scope.stop();
      return $scope.goto('home');
    };
    return $scope.stop = function() {
      if ($scope.playing) {
        if ($scope.media) {
          $scope.media.stop();
          $scope.playing = void 0;
        }
      }
      if ($scope.recording) {
        if ($scope.media) {
          $scope.media.stopRecord();
          return $scope.recording = void 0;
        }
      }
    };
  };

  RecordingController.$inject = ['$scope', '$location', '$timeout'];

}).call(this);
