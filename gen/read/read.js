// Generated by CoffeeScript 1.9.0
(function() {
  module.exports = [
    '$scope', function($scope) {
      var punctuation;
      $scope.pageIndex = 0;
      punctuation = ['(', ')', ',', '...', '!', '?', ';', '.', ':', '"'];
      $scope.nextPage = function() {
        if ($scope.pageIndex < $scope.story.pages(-1)) {
          $scope.pageIndex++;
          return $scope.showPage();
        }
      };
      $scope.prevPage = function() {
        if ($scope.pageIndex > 0) {
          $scope.pageIndex--;
          return $scope.showPage();
        }
      };
      return $scope.showPage = function() {
        var p, text, _i, _len;
        if ($scope.pageIndex === void 0) {
          $scope.pageIndex = 0;
        }
        text = $scope.story.pages[$scope.pageIndex].text;
        for (_i = 0, _len = punctuation.length; _i < _len; _i++) {
          p = punctuation[_i];
          text = S(text).replaceAll(p, " " + p + " ").s;
        }
        text = S(text).collapseWhitespace().s;
        return $scope.words = text.split(" ");
      };
    }
  ];

}).call(this);
