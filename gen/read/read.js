// Generated by CoffeeScript 1.9.0
(function() {
  var mediaService, storyService, wordService;

  storyService = require('./../story-service');

  mediaService = require('./../media-service');

  wordService = {
    getWord: function(text) {
      return void 0;
    }
  };

  module.exports = [
    '$scope', function($scope) {
      $scope.read = function(text) {
        if (_.contains($scope.punctuation, text)) {
          return;
        }
        this.word = storyService.getWord(text);
        if (this.word === void 0) {
          this.word = wordService.getWord(text);
        }
        if (this.word) {
          mediaService.play(this.word.recordingPath, function() {
            return $scope.$apply(function() {
              return delete $scope.word;
            });
          });
        }
        this.reading = text;
        return this.wordImageURL = mediaService.getURL(this.word.imagePath);
      };
      return $scope.closeImage = function() {
        return delete this.wordImageURL;
      };
    }
  ];

}).call(this);
